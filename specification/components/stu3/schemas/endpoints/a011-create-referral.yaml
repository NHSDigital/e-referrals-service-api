security:
  - bearerAuth: []
description: |
  ## Overview
  Use this endpoint to create a referral by choosing a shortlist of bookable services.

  Please note: this endpoint cannot be used to shortlist triage services. In order to make use of triage services please use [[HYPERLINK_A021]].

  ## Supported security patterns
  - Healthcare worker, user-restricted access

  ## Pre-requisites
  In order to use this endpoint you must be an authenticated e-RS user and use one of the following e-RS roles:
    - `REFERRING_CLINICIAN`
    - `REFERRING_CLINICIAN_ADMIN`
  
  You need to have identified a `patient`, for example via [[HYPERLINK_PDS]].

  You need to have found services that meet the referral needs of a patient using [[HYPERLINK_A010]].

  ## Use case
  As an authenticated user

  I need to create a shortlist of bookable services

  So I can initiate my patients referral pathway, allowing the patient to book into one of the shortlisted services.

  ## Related endpoints

  To allow the patient to book their appointment in their own time, you can generate a letter for the patient by 
  using [[HYPERLINK_A019]]. The letter summarises the current state of the referral and any steps the 
  patient may need to follow (e.g. appointment booking instructions).

  You can book an appointment for the patient by using [[HYPERLINK_A015]] and [[HYPERLINK_A016]].

  For the referral to be processed by the service provider, you must ensure appropriate referral letter information has been added to the referral. You can add/manage referrer letter information by using [[HYPERLINK_A012]].

  You can check to see what referral letter information has already been added to a referral by using [[HYPERLINK_A005]], [[HYPERLINK_A007]], and [[HYPERLINK_A006]] endpoints where necessary.

  You can generate a letter for the patient, which summarises the current state of their referral and any steps the patient may need to follow, by using [[HYPERLINK_A019]].

summary: A011 - Create referral
operationId: a011-create-referral
parameters:
  - $ref: '../headers/request/ContentTypeFhirJson.yaml'
  - $ref: '../headers/request/BearerAuthorization.yaml'
  - $ref: '../headers/request/OdsCode.yaml'
  - $ref: '../headers/request/BusinessFunction.yaml'
  - $ref: '../headers/request/CorrelationID.yaml'
requestBody:
  required: true
  content:
    application/fhir+json:
      schema:
        $ref: '../eRS-CreateReferral-Parameters.yaml'
      examples:
        rc-minimum-request-body:
          summary: Referring Clinician - minimum request body
          value:
            $ref: '../../examples/createReferral/requests/MinimalRequest.json'
        rc-request-body-multi-service-shortlist:
          summary: Referring Clinician - request body using multi-service shortlist
          value:
            $ref: '../../examples/createReferral/requests/RequestTwentyServices.json'
        create-referral-parameters-twenty-services:
          summary: Referring Clinician Admin - minimum request body
          value:
            $ref: '../../examples/createReferral/requests/MinimalRequestWithReferringClinician.json'
responses:
  '201':
    $ref: '../responses/createReferral/201Response.yaml'
  '400':
    $ref: '../responses/BadRequest.yaml'
  '401':
    $ref: '../responses/Unauthorized.yaml'
  '403':
    $ref: '../responses/Forbidden.yaml'
  '406':
    $ref: '../responses/NotAcceptable.yaml'
  '415':
    $ref: '../responses/UnsupportedMediaType.yaml'
  '422':
    $ref: '../responses/CreateReferralErrorOutcome.yaml'
  '429':
    $ref: '../responses/TooManyRequests.yaml'
  '500':
    $ref: '../responses/InternalServerError.yaml'